# 第四章：编码与演化-nknote
这里修改成软件演化与编码比较合适，实际情况是因为有了软件的版本更新演化，编码技术为了解决新旧版本兼容适配等问题，创造出合理的设计理念
- 编码：是对数据的处理
- 演化：是软件系统版本更新迭代的过程

这里还有两个概念关系：程序版本与数据结构版本
 - 程序版本随着时间推移，功能越来越多，需要读写的数据结构（例如：存储到数据库数据、网络通信数据）都会发生变化
 -  数据库中同时存在老数据、新数据，网络通信，同时存在新旧版本通信双方，数据结构版本会在某一时刻同时出现

需要保证双向兼容性
- 向前兼容：新代码可以读旧数据
- 向后兼容：旧代码可以读新数据
 > **新版本中添加的每个字段必须是可选的或具有默认值**

编码格式
- 编程语言自带格式
- json/xml   兼容性无法默认考虑
- thrift and protobuf  **接口定义语言（IDL）**
通过字段标签标识字段，而不是字段名称
- Avro 的 Writer模式与Reader模式。Writer 模式和 Reader 模式不必是相同的 - 他们只需要兼容

>  - 模式解析通过字段名匹配字段
>  - 如果读取数据的代码遇到出现在 Writer 模式中但不在 Reader 模式中的字段，则忽略它。
>  - 如果读取数据的代码需要某个字段，但是 Writer 模式不包含该名称的字段，则使用在 Reader 模式中声明的默认值填充。
